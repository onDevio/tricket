<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Ticket</title>

    <!-- Bootstrap core CSS -->
    <link href="/template/dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="/vendor/dropzone/dist/min/dropzone.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/template/dashboard/dashboard.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="/template/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Load c3.css -->
    <link href="/vendor/c3/c3.min.css" rel="stylesheet" type="text/css">

    <!-- Load d3.js and c3.js -->
    <script src="/vendor/d3/d3.min.js" charset="utf-8"></script>
    <script src="/vendor/c3/c3.min.js"></script>
    <script src="/vendor/jquery/dist/jquery.min.js"></script>
    <script src="/vendor/underscore/underscore-min.js"></script>

    <link href="/vendor/x-editable/dist/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet">
    <style type="text/css">
      .editableform .form-control {
        width: 100%;
      }
      .editable-container.editable-inline{
        width: 100%;
      }
      .editable-input{
        width: 100%;
      }
      .control-group.form-group{
        width: 88%;
      }
      ol{
        padding: 20px;
        list-style-type:decimal;
      }
      ol li {
        float:left;
        margin: 0 10px;
        padding: 0 10px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top cms-render-user">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">Tricket</a>
        </div>
        <span class="user pull-right"><span>Alexis Maeso Serrano  </span><img class="img-thumbnail" src="https://lh3.googleusercontent.com/-eoyJtjS5uIc/AAAAAAAAAAI/AAAAAAAAAF8/5rb4gmDmBwA/photo.jpg?sz=50"></span>
      </div>
    </nav>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li><a href="/app/tickets">Tickets</a></li>
            <li><a href="/app/reports">Reports</a></li>
            <li><a href="/app/customers">Customers</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 col-lg-10 col-lg-offset-2 main cms-data-single-ticket cms-render-single-ticket">
          <h2 class="sub-header col-lg-8"><span class="status"><span class="label label-success">Open</span></span> [<span class="id">ICAV-257</span>] - <span class="title">Cambios formaci&#xF3;n. </span></h2>
          <div class="col-lg-4">
            <div class="panel panel-default">
              <div class="panel-heading">Asigned to: <span class="asignee">Not asigned</span></div>
              <div class="panel-body options">
                <span>Available Actions:
                  <a style="display:inline;" id="asign" href="/api/ticket/ICAV-257/asign/Alexis Maeso Serrano" class="btn btn-default pull-right">
                    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Asign Ticket
                  </a>
                  <a style="display:none;" id="reject" href="/api/ticket/CUS-1/reject" class="btn btn-default pull-right">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Reject Ticket
                  </a>
                </span>
              </div>
            </div>
            <div class="panel panel-default note">
              <div class="panel-heading">
                <h4>Files Attached</h4>
              </div>
              <div class="note-editable">
                <ol class="downloadFiles">
                  
                <li><a href="/api/file/ICAV-257/image005 (2).jpg-1493910458718" target="_blank" download="">image005 (2).jpg</a></li></ol>
              </div>
            </div>

          </div>
          <div class="notes col-lg-12">
            <h3>From: <span class="customer-email x-editable" id="customer.email" data-type="text" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/save" data-title="Enter client">formacion@icav.es</span>
              <span class="pull-right label label-info">Worklog: <span class="worklog">3</span> Hours</span>
            </h3>
            
          <div class="panel panel-default note">
              <div class="panel-heading">
                <button class="btn btn-primary edit" onclick="edit(0)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button>
                <span class="label label-warning note-external">External</span>
                
                <span class="note-author">Alexis Maeso Serrano</span> commented <span class="note-date">a month ago</span> on <span class="note-real">04/05//2017</span>
                <span class="pull-right label label-info">Spent: <span class="note-worklog">0</span> Hours</span>
              </div>
              <div class="note-editable" id="note-0">
                <div class="panel-body note-body marked" data-url="/api/ticket/ICAV-257/0/save" data-pk="ICAV-257">Buenos d&#xED;as Alexis:
 
Como tenemos varios cursos de modalidad on line (arbitraje, penitenciario, mediaci&#xF3;n&#x2026;.) y la Junta de Gobierno tiene inter&#xE9;s en fomentar este tipo de cursos, resulta que tal y como est&#xE1; montado el volcado de cursos de formaci&#xF3;n en el programa, para estos cursos sin fechas de celebraci&#xF3;n nos encontramos que no pueden ser volcados y por tanto en la gesti&#xF3;n personal a los colegiados no les aparecen.

Nos gustar&#xED;a, que los cursos donde pongamos que es on line, se pudieran volcar y de alguna manera, se creara un check de  que superan y no superan el curso y que a los colegiados les conste esta formaci&#xF3;n en su gesti&#xF3;n personal.
 
Por otra parte, hay alg&#xFA;n curso como el de especializaci&#xF3;n del turno de oficio, que es presencial pero en los que no solo cuenta el % de asistencia, si no que cuenta la superaci&#xF3;n de un examen, y nos pasa lo mismo que volcamos las asistencias pero como tenemos alumnos que por asistencia cumplen pero que luego suspenden el examen, no los podemos cerrar y por al colegiado no le consta en su gesti&#xF3;n personal. En estos casos tambi&#xE9;n, se tendr&#xED;a que hacer algo para que pudi&#xE9;ramos poner superado o no superado.
 
Pongo en copia a Luis del R&#xED;o, porque no s&#xE9; qu&#xE9; carga de horas de trabajo puede suponer y si se podr&#xED;a hacer. Esto si se hace, quedar&#xED;a pendiente con lo que os solicit&#xE9; el 4 de abril de a&#xF1;adir en todos los cursos un campo que sea: organizado por y con el listado que te pase, seleccionar en el desplegable la secci&#xF3;n correspondiente.
 
Quedo pendiente de tu respuesta.</div>
                <div class="panel-body note-body x-editable hidden" data-type="textarea" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/0/save" data-title="Modify Note" data-name="external">Buenos d&#xED;as Alexis:
 
Como tenemos varios cursos de modalidad on line (arbitraje, penitenciario, mediaci&#xF3;n&#x2026;.) y la Junta de Gobierno tiene inter&#xE9;s en fomentar este tipo de cursos, resulta que tal y como est&#xE1; montado el volcado de cursos de formaci&#xF3;n en el programa, para estos cursos sin fechas de celebraci&#xF3;n nos encontramos que no pueden ser volcados y por tanto en la gesti&#xF3;n personal a los colegiados no les aparecen.

Nos gustar&#xED;a, que los cursos donde pongamos que es on line, se pudieran volcar y de alguna manera, se creara un check de  que superan y no superan el curso y que a los colegiados les conste esta formaci&#xF3;n en su gesti&#xF3;n personal.
 
Por otra parte, hay alg&#xFA;n curso como el de especializaci&#xF3;n del turno de oficio, que es presencial pero en los que no solo cuenta el % de asistencia, si no que cuenta la superaci&#xF3;n de un examen, y nos pasa lo mismo que volcamos las asistencias pero como tenemos alumnos que por asistencia cumplen pero que luego suspenden el examen, no los podemos cerrar y por al colegiado no le consta en su gesti&#xF3;n personal. En estos casos tambi&#xE9;n, se tendr&#xED;a que hacer algo para que pudi&#xE9;ramos poner superado o no superado.
 
Pongo en copia a Luis del R&#xED;o, porque no s&#xE9; qu&#xE9; carga de horas de trabajo puede suponer y si se podr&#xED;a hacer. Esto si se hace, quedar&#xED;a pendiente con lo que os solicit&#xE9; el 4 de abril de a&#xF1;adir en todos los cursos un campo que sea: organizado por y con el listado que te pase, seleccionar en el desplegable la secci&#xF3;n correspondiente.
 
Quedo pendiente de tu respuesta.</div>
              </div>
            </div><div class="panel panel-default note">
              <div class="panel-heading">
                <button class="btn btn-primary edit" onclick="edit(1)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button>
                
                <span class="label label-default note-internal">Internal</span>
                <span class="note-author">Alexis Maeso Serrano</span> commented <span class="note-date">a month ago</span> on <span class="note-real">09/05//2017</span>
                <span class="pull-right label label-info">Spent: <span class="note-worklog">0</span> Hours</span>
              </div>
              <div class="note-editable" id="note-1">
                <div class="panel-body note-body marked" data-url="/api/ticket/ICAV-257/1/save" data-pk="ICAV-257">Buenas tardes Encarna. 

Estoy revisando este asunto para ver como podemos resolverlo. Se me ocurre que pod&#xE1;is indicar cada uno de los tipos que me has indicado, reaccionando de una forma u otra seg&#xFA;n el tipo indicado:
Formaci&#xF3;n Online. El usuario indicar&#xE1; manualmente si el asistente a aprobado el curso. 
Formaci&#xF3;n Aprobado por Asistencia. Se calcular&#xED;a el porcentaje de asistencia como hasta ahora. 
Aprobado por Asistencia + Examen. Se chequear&#xED;a un campo para indicar que el asistente ha aprobado el examen adem&#xE1;s de calcular el porcentaje de asistencia.  
Por otro lado nos tocar&#xE1; actualizar la web para adaptarse a estos cambios y que los cursos aparezcan seg&#xFA;n les corresponda. 

Ya nos cont&#xE1;is que os parece. 

Saludos. </div>
                <div class="panel-body note-body x-editable hidden" data-type="textarea" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/1/save" data-title="Modify Note" data-name="internal">Buenas tardes Encarna. 

Estoy revisando este asunto para ver como podemos resolverlo. Se me ocurre que pod&#xE1;is indicar cada uno de los tipos que me has indicado, reaccionando de una forma u otra seg&#xFA;n el tipo indicado:
Formaci&#xF3;n Online. El usuario indicar&#xE1; manualmente si el asistente a aprobado el curso. 
Formaci&#xF3;n Aprobado por Asistencia. Se calcular&#xED;a el porcentaje de asistencia como hasta ahora. 
Aprobado por Asistencia + Examen. Se chequear&#xED;a un campo para indicar que el asistente ha aprobado el examen adem&#xE1;s de calcular el porcentaje de asistencia.  
Por otro lado nos tocar&#xE1; actualizar la web para adaptarse a estos cambios y que los cursos aparezcan seg&#xFA;n les corresponda. 

Ya nos cont&#xE1;is que os parece. 

Saludos. </div>
              </div>
            </div><div class="panel panel-default note">
              <div class="panel-heading">
                <button class="btn btn-primary edit" onclick="edit(2)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button>
                
                <span class="label label-default note-internal">Internal</span>
                <span class="note-author">Alexis Maeso Serrano</span> commented <span class="note-date">a month ago</span> on <span class="note-real">10/05//2017</span>
                <span class="pull-right label label-info">Spent: <span class="note-worklog">0</span> Hours</span>
              </div>
              <div class="note-editable" id="note-2">
                <div class="panel-body note-body marked" data-url="/api/ticket/ICAV-257/2/save" data-pk="ICAV-257">Actualmente. Se hace un rec&#xE1;lculo autom&#xE1;tico  de los porcentajes bajo dos circunstancias:
Guardado de los datos del curso.
Pulsando el bot&#xF3;n refrescar datos.
 Tenemos que dejar muy claro si act&#xFA;a autom&#xE1;ticamente o manualmente. Me explico, ahora s&#xF3;lo se tiene en cuenta el porcentaje y vamos a cambiarlo para que:
En algunos casos aparezca un check para indicar que el colegiado ha pasado un examen (O varias pruebas independientes de la asistencia) 
Disponer de un check que indique si ha superado o no el curso.
Si queremos controlar manualmente en todo momento el check que indica que ha superado el curso, no podemos consentir que un proceso autom&#xE1;tico cambie el dato que hemos puesto manualmente tanto si es para indicar que ha superado el curso, como que no.

Lo &#xFA;nico que se me ocurre es que adem&#xE1;s de todas las opciones anteriores, podamos bloquear el campo que indica que se ha superado el curso a nivel individual, de forma que los procesos autom&#xE1;ticos salten la comprobaci&#xF3;n al detectar que est&#xE1; bloqueado. 

De todos modos revisar&#xE9; tranquilamente los diferentes apartados que se ver&#xE1;n afectados por los cambios y vamos pensando si podemos optar a una soluci&#xF3;n mejor. 

Saludos</div>
                <div class="panel-body note-body x-editable hidden" data-type="textarea" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/2/save" data-title="Modify Note" data-name="internal">Actualmente. Se hace un rec&#xE1;lculo autom&#xE1;tico  de los porcentajes bajo dos circunstancias:
Guardado de los datos del curso.
Pulsando el bot&#xF3;n refrescar datos.
 Tenemos que dejar muy claro si act&#xFA;a autom&#xE1;ticamente o manualmente. Me explico, ahora s&#xF3;lo se tiene en cuenta el porcentaje y vamos a cambiarlo para que:
En algunos casos aparezca un check para indicar que el colegiado ha pasado un examen (O varias pruebas independientes de la asistencia) 
Disponer de un check que indique si ha superado o no el curso.
Si queremos controlar manualmente en todo momento el check que indica que ha superado el curso, no podemos consentir que un proceso autom&#xE1;tico cambie el dato que hemos puesto manualmente tanto si es para indicar que ha superado el curso, como que no.

Lo &#xFA;nico que se me ocurre es que adem&#xE1;s de todas las opciones anteriores, podamos bloquear el campo que indica que se ha superado el curso a nivel individual, de forma que los procesos autom&#xE1;ticos salten la comprobaci&#xF3;n al detectar que est&#xE1; bloqueado. 

De todos modos revisar&#xE9; tranquilamente los diferentes apartados que se ver&#xE1;n afectados por los cambios y vamos pensando si podemos optar a una soluci&#xF3;n mejor. 

Saludos</div>
              </div>
            </div><div class="panel panel-default note">
              <div class="panel-heading">
                <button class="btn btn-primary edit" onclick="edit(3)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button>
                
                <span class="label label-default note-internal">Internal</span>
                <span class="note-author">Alexis Maeso Serrano</span> commented <span class="note-date">a month ago</span> on <span class="note-real">09/05//2017</span>
                <span class="pull-right label label-info">Spent: <span class="note-worklog">1</span> Hours</span>
              </div>
              <div class="note-editable" id="note-3">
                <div class="panel-body note-body marked" data-url="/api/ticket/ICAV-257/3/save" data-pk="ICAV-257">An&#xE1;lisis</div>
                <div class="panel-body note-body x-editable hidden" data-type="textarea" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/3/save" data-title="Modify Note" data-name="internal">An&#xE1;lisis</div>
              </div>
            </div><div class="panel panel-default note">
              <div class="panel-heading">
                <button class="btn btn-primary edit" onclick="edit(4)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button>
                
                <span class="label label-default note-internal">Internal</span>
                <span class="note-author">Alexis Maeso Serrano</span> commented <span class="note-date">a month ago</span> on <span class="note-real">10/05//2017</span>
                <span class="pull-right label label-info">Spent: <span class="note-worklog">1</span> Hours</span>
              </div>
              <div class="note-editable" id="note-4">
                <div class="panel-body note-body marked" data-url="/api/ticket/ICAV-257/4/save" data-pk="ICAV-257">Atenci&#xF3;n a Encarna por los cambios solicitados. </div>
                <div class="panel-body note-body x-editable hidden" data-type="textarea" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/4/save" data-title="Modify Note" data-name="internal">Atenci&#xF3;n a Encarna por los cambios solicitados. </div>
              </div>
            </div><div class="panel panel-default note">
              <div class="panel-heading">
                <button class="btn btn-primary edit" onclick="edit(5)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button>
                
                <span class="label label-default note-internal">Internal</span>
                <span class="note-author">Alexis Maeso Serrano</span> commented <span class="note-date">a month ago</span> on <span class="note-real">11/05//2017</span>
                <span class="pull-right label label-info">Spent: <span class="note-worklog">1</span> Hours</span>
              </div>
              <div class="note-editable" id="note-5">
                <div class="panel-body note-body marked" data-url="/api/ticket/ICAV-257/5/save" data-pk="ICAV-257">An&#xE1;lisis y atenci&#xF3;n a Encarna</div>
                <div class="panel-body note-body x-editable hidden" data-type="textarea" data-pk="ICAV-257" data-url="/api/ticket/ICAV-257/5/save" data-title="Modify Note" data-name="internal">An&#xE1;lisis y atenci&#xF3;n a Encarna</div>
              </div>
            </div></div>
          <form method="post" action="/api/ticket/ICAV-257/note">
            <div class="form-group col-lg-4">
              <label for="type">Note Type</label>
              <select class="form-control" name="type">
                <option value="internal" selected>Internal note</option>
                <option value="external">External note</option>
              </select>
            </div>
            <div class="form-group col-lg-4">
              <label for="workload">Work Log</label>
              <input type="number" class="form-control" id="workload" name="worklog" placeholder="Work load in Hours">
            </div>
            <div class="form-group col-lg-4">
              <label for="date">Date</label>
              <input type="date" class="form-control" id="date" name="date" placeholder="Date if not today">
            </div>
            <div class="form-group col-lg-12">
              <label class="sr-only" for="body">Note details</label>
              <textarea name="body" id="body" placeholder="Ticket description" oninput="this.editor.update()" class="form-control" rows="10"></textarea>
              <div class="panel panel-default note">
                <div class="panel-heading">
                  <span class="label label-warning note-external">Ticket Preview</span>
                </div>
                <div id="preview" class="panel-body"></div>
              </div>
            </div>
            <div class="form-group col-lg-12">
              <span class="pull-right buttons">
                <span class="open" style="display:inline;">
                  <button type="submit" class="btn btn-primary" name="close">Add note and Close</button>
                  <button type="submit" class="btn btn-success" name="note">Add note</button>
                </span>
                <span class="closed" style="display: none;">
                  <button type="submit" class="btn btn-primary" name="open">Reopen and add note</button>
                  <button type="submit" class="btn btn-success" name="note">Add note</button>
                </span>
                <span class="trashed" style="display: none;">
                   <button type="submit" class="btn btn-primary" name="untrash">Untrash</button>
                </span>
              </span>
            </div>
            <div class="form-group col-lg-12">
             <div action="/api/file-upload/ICAV-257" class="dropzone" id="files">
                <div class="fallback">
                  <input name="file" type="file" multiple>
                </div>
              </div>
            </div>
          </form>
          </div>
        </div>
      </div>
    


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/vendor/x-editable/dist/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <script>
    function edit(id){
      //console.log('Edit');
      $('#note-'+id+' .hidden' ).removeClass('hidden');
      $('#note-'+id+' .marked' ).addClass('hidden');
      $('#note-'+id+' .x-editable').editable();
      setTimeout(function(){ $('#note-'+id+' .x-editable').editable('toggle'); }, 500);
    }
    </script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="/template/assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/template/assets/js/ie10-viewport-bug-workaround.js"></script>
    <script type="text/javascript" src="/template/dashboard/markdown.js"></script>
    <script type="text/javascript">
      (function(){
        $.fn.editable.defaults.mode = 'inline';
        $('.customer-email').editable();
        $('.x-editable').on('hidden', function(e, reason) {
          location.reload();
        });
        $('.marked').each(
          function(){
            this.innerHTML = markdown.toHTML(this.innerHTML)
          }
        );
      })();
    </script>
    <script src="/vendor/dropzone/dist/min/dropzone.min.js"></script>
    <script>
      //Ticket preview
      function Editor(input, preview) {
        this.update = function () {
          preview.innerHTML = markdown.toHTML(input.value);
        };
        input.editor = this;
        this.update();
      }
      var lel = function (id) { return document.getElementById(id); };
      new Editor(lel("body"), lel("preview"));

      var files = [];
      //Configuración de dropzone
      Dropzone.options.files = {
        paramName: 'file', // The name that will be used to transfer the file
        maxFilesize: 100, // MB,
        success: function( file, response ){
            //console.log(response[0].filename);
            files.push(response[0].filename);
        }
      };

      $( "form" ).submit(function( event ) {
        //console.log( "Handler for .submit() called." );
        $('.fileArray')[0].value = files;
        return true;
      });
    </script>
  </body>
</html>
                